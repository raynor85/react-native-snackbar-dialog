{"version":3,"sources":["../src/SnackBar.js"],"names":["DEFAULT_DURATION","DEFAULT_FADEOUT_DURATION","INITIAL_POSITION_BOTTOM","INITIAL_POSITION_TOP","TO_POSITION_BOTTOM","TO_POSITION_TOP","STYLE_BANNER_COLOR","TEXT_COLOR_ACCENT","get","width","styles","create","containerBottom","flex","position","bottom","containerTop","top","text","paddingHorizontal","paddingVertical","fontSize","inlineText","buttonContainer","button","fontWeight","actionRow","flexDirection","justifyContent","padding","marginBottom","inlineRow","alignItems","minHeight","flat","SnackBar","props","show","state","transformOpacity","transformOffsetYTop","transformOffsetYBottom","fadeOutDuration","isStatic","duration","initialPosition","transformOffsetY","parallel","timing","toValue","easing","inOut","quad","useNativeDriver","start","runAfterInteractions","setTimeout","hide","onAutoDismiss","toPosition","renderButton","onPress","style","buttonColor","color","renderContent","confirmText","onConfirm","cancelText","onCancel","title","textColor","textStyle","titleElement","Value","backgroundColor","tapToClose","isTop","opacity","transform","translateY","defaultProps","Function","prototype"],"mappings":"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","file":"SnackBar.js","sourcesContent":["// @flow\n\nimport React, { Component } from 'react'\nimport type { SnackItemType } from './type'\nimport TimerMixin from 'react-timer-mixin'\nimport reactMixin from 'react-mixin'\n\nimport {\n  View,\n  Animated,\n  Dimensions,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Easing,\n  InteractionManager,\n  TouchableWithoutFeedback\n} from 'react-native'\n\nconst DEFAULT_DURATION: number = 6000\nconst DEFAULT_FADEOUT_DURATION: number = 250\nconst INITIAL_POSITION_BOTTOM: number = -180\nconst INITIAL_POSITION_TOP: number = 0\nconst TO_POSITION_BOTTOM: number = 180\nconst TO_POSITION_TOP: number = -360\n\nconst STYLE_BANNER_COLOR: string = '#333333'\nconst TEXT_COLOR_ACCENT: string = '#ffa726'\n\nconst { width } = Dimensions.get('window')\n\nconst styles = StyleSheet.create({\n  containerBottom: {\n    flex: 1,\n    position: 'absolute',\n    bottom: INITIAL_POSITION_BOTTOM,\n    width\n  },\n\n  containerTop: {\n    flex: 1,\n    position: 'absolute',\n    top: INITIAL_POSITION_TOP,\n    width\n  },\n\n  text: {\n    paddingHorizontal: 12,\n    paddingVertical: 14,\n    fontSize: 14\n  },\n\n  inlineText: {\n    flex: 1,\n    paddingHorizontal: 12,\n    paddingVertical: 14,\n    fontSize: 14\n  },\n\n  buttonContainer: {\n    paddingHorizontal: 12,\n    paddingVertical: 14\n  },\n\n  button: {\n    fontSize: 14,\n    fontWeight: '500'\n  },\n\n  actionRow: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    padding: 8,\n    marginBottom: 8\n  },\n\n  inlineRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    minHeight: 48,\n    paddingHorizontal: 12\n  },\n\n  flat: {\n    fontSize: 14\n  }\n})\n\nexport default class SnackBar extends Component {\n  state: {\n    transformOffsetYTop: any,\n    transformOffsetYBottom: any,\n    transformOpacity: any\n  }\n\n  props: SnackItemType\n\n  static defaultProps = {\n    // Behaviour\n    fadeOutDuration: DEFAULT_FADEOUT_DURATION,\n    duration: DEFAULT_DURATION,\n    isStatic: false,\n\n    // Functions\n    onConfirm: Function,\n    onCancel: Function,\n    onAutoDismiss: Function,\n\n    // Styles\n    style: {},\n    renderContent: null,\n    backgroundColor: STYLE_BANNER_COLOR,\n    buttonColor: TEXT_COLOR_ACCENT,\n    textColor: 'white',\n    position: 'bottom'\n  }\n\n  constructor (props: SnackItemType) {\n    super(props)\n\n    this.state = {\n      transformOffsetYTop: new Animated.Value(-180),\n      transformOffsetYBottom: new Animated.Value(0),\n      transformOpacity: new Animated.Value(0)\n    }\n  }\n\n  componentDidMount () {\n    this.show()\n  }\n\n  componentWillUnmount () {\n    if (this.props.isStatic) {\n      this.hide()\n    }\n  }\n\n  show = () => {\n    const {\n      transformOpacity,\n      transformOffsetYTop,\n      transformOffsetYBottom\n    } = this.state\n\n    const {\n      fadeOutDuration,\n      isStatic,\n      duration,\n      position\n    } = this.props\n\n    const initialPosition = position === 'top'\n      ? INITIAL_POSITION_TOP\n      : INITIAL_POSITION_BOTTOM\n    const transformOffsetY = position === 'top'\n      ? transformOffsetYTop\n      : transformOffsetYBottom\n\n    Animated.parallel([\n      Animated.timing(transformOpacity, {\n        toValue: 1,\n        duration: fadeOutDuration,\n        easing: Easing.inOut(Easing.quad),\n        useNativeDriver: true\n      }),\n      Animated.timing(transformOffsetY, {\n        toValue: initialPosition,\n        duration: fadeOutDuration,\n        easing: Easing.inOut(Easing.quad),\n        useNativeDriver: true\n      })\n    ]).start(() => {\n      if (isStatic) {\n        return\n      }\n\n      InteractionManager.runAfterInteractions(() => {\n        this.setTimeout(() => {\n          this.hide()\n        }, duration)\n      })\n    })\n  }\n\n  hide = () => {\n    const {\n      transformOpacity,\n      transformOffsetYTop,\n      transformOffsetYBottom\n    } = this.state\n\n    const {\n      fadeOutDuration,\n      onAutoDismiss,\n      position\n    } = this.props\n\n    const transformOffsetY = position === 'top'\n      ? transformOffsetYTop\n      : transformOffsetYBottom\n    const toPosition = position === 'top'\n      ? TO_POSITION_TOP\n      : TO_POSITION_BOTTOM\n\n    Animated.parallel([\n      Animated.timing(transformOpacity, {\n        toValue: 0,\n        duration: fadeOutDuration,\n        easing: Easing.inOut(Easing.quad),\n        useNativeDriver: true\n      }),\n      Animated.timing(transformOffsetY, {\n        toValue: toPosition,\n        easing: Easing.inOut(Easing.quad),\n        duration: fadeOutDuration,\n        useNativeDriver: true\n      })\n    ]).start(() => { onAutoDismiss && onAutoDismiss() })\n  }\n\n  renderButton = (text: string, onPress: Function = () => {}, style?: Object) => {\n    const { buttonColor } = this.props\n\n    return (\n      <TouchableOpacity style={styles.buttonContainer} onPress={onPress}>\n        <Text style={[styles.button, style, { color: buttonColor }]}>\n          {text}\n        </Text>\n      </TouchableOpacity>\n    )\n  }\n\n  renderContent = () => {\n    const {\n      confirmText,\n      onConfirm,\n      cancelText,\n      onCancel,\n      title,\n      textColor,\n      textStyle\n    } = this.props\n\n    const titleElement = <Text style={[styles.text, { color: textColor }, textStyle]}>{title}</Text>\n\n    if (confirmText && cancelText) {\n      return (\n        <View>\n          {titleElement}\n          <View style={styles.actionRow}>\n            { this.renderButton(cancelText, onCancel, styles.flat) }\n            { this.renderButton(confirmText, onConfirm, styles.flat) }\n          </View>\n        </View>\n      )\n    }\n\n    if (confirmText) {\n      return (\n        <View style={styles.inlineRow}>\n          <Text style={[styles.inlineText, { color: textColor }]}>{title}</Text>\n          { this.renderButton(confirmText, onConfirm) }\n        </View>\n      )\n    }\n\n    return titleElement\n  }\n\n  render () {\n    const { style, renderContent, backgroundColor, position, tapToClose } = this.props\n\n    const isTop = position === 'top'\n    const transformOffsetY = isTop\n      ? this.state.transformOffsetYTop\n      : this.state.transformOffsetYBottom\n    return (\n      <TouchableWithoutFeedback onPress={() => tapToClose && this.hide()}>\n        <Animated.View\n          style={[\n            isTop && styles.containerTop || !isTop && styles.containerBottom,\n            {\n              opacity: this.state.transformOpacity,\n              transform: [{ translateY: transformOffsetY }],\n              backgroundColor\n            },\n            style\n          ]}\n        >\n          { renderContent ? renderContent() : this.renderContent() }\n        </Animated.View>\n      </TouchableWithoutFeedback>\n    )\n  }\n}\n\nreactMixin(SnackBar.prototype, TimerMixin)\n"]}