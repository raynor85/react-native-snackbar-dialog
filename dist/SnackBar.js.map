{"version":3,"sources":["../src/SnackBar.js"],"names":["DEFAULT_DURATION","DEFAULT_FADEOUT_DURATION","INITIAL_POSITION_BOTTOM","INITIAL_POSITION_TOP","TO_POSITION_BOTTOM","TO_POSITION_TOP","STYLE_BANNER_COLOR","TEXT_COLOR_ACCENT","get","width","styles","create","containerBottom","flex","position","bottom","containerTop","top","text","paddingHorizontal","paddingVertical","fontSize","inlineText","buttonContainer","button","fontWeight","actionRow","flexDirection","justifyContent","padding","marginBottom","inlineRow","alignItems","minHeight","flat","SnackBar","props","show","state","transformOpacity","transformOffsetYTop","transformOffsetYBottom","fadeOutDuration","isStatic","duration","initialPosition","transformOffsetY","parallel","timing","toValue","easing","inOut","quad","useNativeDriver","start","runAfterInteractions","setTimeout","hide","onAutoDismiss","toPosition","renderButton","onPress","style","buttonColor","color","renderContent","confirmText","onConfirm","cancelText","onCancel","title","textColor","titleElement","Value","backgroundColor","tapToClose","isTop","opacity","transform","translateY","defaultProps","Function","prototype"],"mappings":"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","file":"SnackBar.js","sourcesContent":["// @flow\n\nimport React, { Component } from 'react'\nimport type { SnackItemType } from './type'\nimport TimerMixin from 'react-timer-mixin'\nimport reactMixin from 'react-mixin'\n\nimport {\n  View,\n  Animated,\n  Dimensions,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Easing,\n  InteractionManager,\n  TouchableWithoutFeedback\n} from 'react-native'\n\nconst DEFAULT_DURATION: number = 4000\nconst DEFAULT_FADEOUT_DURATION: number = 250\nconst INITIAL_POSITION_BOTTOM: number = -180\nconst INITIAL_POSITION_TOP: number = 0\nconst TO_POSITION_BOTTOM: number = 180\nconst TO_POSITION_TOP: number = -360\n\nconst STYLE_BANNER_COLOR: string = '#333333'\nconst TEXT_COLOR_ACCENT: string = '#ffa726'\n\nconst { width } = Dimensions.get('window')\n\nconst styles = StyleSheet.create({\n  containerBottom: {\n    flex: 1,\n    position: 'absolute',\n    bottom: INITIAL_POSITION_BOTTOM,\n    width\n  },\n\n  containerTop: {\n    flex: 1,\n    position: 'absolute',\n    top: INITIAL_POSITION_TOP,\n    width\n  },\n\n  text: {\n    paddingHorizontal: 12,\n    paddingVertical: 14,\n    fontSize: 14\n  },\n\n  inlineText: {\n    flex: 1,\n    paddingHorizontal: 12,\n    paddingVertical: 14,\n    fontSize: 14\n  },\n\n  buttonContainer: {\n    paddingHorizontal: 12,\n    paddingVertical: 14\n  },\n\n  button: {\n    fontSize: 14,\n    fontWeight: '500'\n  },\n\n  actionRow: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    padding: 8,\n    marginBottom: 8\n  },\n\n  inlineRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    minHeight: 48,\n    paddingHorizontal: 12\n  },\n\n  flat: {\n    fontSize: 14\n  }\n})\n\nexport default class SnackBar extends Component {\n  state: {\n    transformOffsetYTop: any,\n    transformOffsetYBottom: any,\n    transformOpacity: any\n  }\n\n  props: SnackItemType\n\n  static defaultProps = {\n    // Behaviour\n    fadeOutDuration: DEFAULT_FADEOUT_DURATION,\n    duration: DEFAULT_DURATION,\n    isStatic: false,\n\n    // Functions\n    onConfirm: Function,\n    onCancel: Function,\n    onAutoDismiss: Function,\n\n    // Styles\n    style: {},\n    backgroundColor: STYLE_BANNER_COLOR,\n    buttonColor: TEXT_COLOR_ACCENT,\n    textColor: 'white',\n    position: 'bottom'\n  }\n\n  constructor (props: SnackItemType) {\n    super(props)\n\n    this.state = {\n      transformOffsetYTop: new Animated.Value(-180),\n      transformOffsetYBottom: new Animated.Value(0),\n      transformOpacity: new Animated.Value(0)\n    }\n  }\n\n  componentDidMount () {\n    this.show()\n  }\n\n  componentWillUnmount () {\n    if (this.props.isStatic) {\n      this.hide()\n    }\n  }\n\n  show = () => {\n    const {\n      transformOpacity,\n      transformOffsetYTop,\n      transformOffsetYBottom\n    } = this.state\n\n    const {\n      fadeOutDuration,\n      isStatic,\n      duration,\n      position\n    } = this.props\n\n    const initialPosition = position === 'top'\n      ? INITIAL_POSITION_TOP\n      : INITIAL_POSITION_BOTTOM\n    const transformOffsetY = position === 'top'\n      ? transformOffsetYTop\n      : transformOffsetYBottom\n\n    Animated.parallel([\n      Animated.timing(transformOpacity, {\n        toValue: 1,\n        duration: fadeOutDuration,\n        easing: Easing.inOut(Easing.quad),\n        useNativeDriver: true\n      }),\n      Animated.timing(transformOffsetY, {\n        toValue: initialPosition,\n        duration: fadeOutDuration,\n        easing: Easing.inOut(Easing.quad),\n        useNativeDriver: true\n      })\n    ]).start(() => {\n      if (isStatic) {\n        return\n      }\n\n      InteractionManager.runAfterInteractions(() => {\n        this.setTimeout(() => {\n          this.hide()\n        }, duration)\n      })\n    })\n  }\n\n  hide = () => {\n    const {\n      transformOpacity,\n      transformOffsetYTop,\n      transformOffsetYBottom\n    } = this.state\n\n    const {\n      fadeOutDuration,\n      onAutoDismiss,\n      position\n    } = this.props\n\n    const transformOffsetY = position === 'top'\n      ? transformOffsetYTop\n      : transformOffsetYBottom\n    const toPosition = position === 'top'\n      ? TO_POSITION_TOP\n      : TO_POSITION_BOTTOM\n\n    Animated.parallel([\n      Animated.timing(transformOpacity, {\n        toValue: 0,\n        duration: fadeOutDuration,\n        easing: Easing.inOut(Easing.quad),\n        useNativeDriver: true\n      }),\n      Animated.timing(transformOffsetY, {\n        toValue: toPosition,\n        easing: Easing.inOut(Easing.quad),\n        duration: fadeOutDuration,\n        useNativeDriver: true\n      })\n    ]).start(() => { onAutoDismiss && onAutoDismiss() })\n  }\n\n  renderButton = (text: string, onPress: Function = () => {}, style?: Object) => {\n    const { buttonColor } = this.props\n\n    return (\n      <TouchableOpacity style={styles.buttonContainer} onPress={onPress}>\n        <Text style={[styles.button, style, { color: buttonColor }]}>\n          {text}\n        </Text>\n      </TouchableOpacity>\n    )\n  }\n\n  renderContent = () => {\n    const {\n      confirmText,\n      onConfirm,\n      cancelText,\n      onCancel,\n      title,\n      textColor\n    } = this.props\n\n    const titleElement = <Text style={[styles.text, { color: textColor }]}>{title}</Text>\n\n    if (confirmText && cancelText) {\n      return (\n        <View>\n          {titleElement}\n          <View style={styles.actionRow}>\n            { this.renderButton(cancelText, onCancel, styles.flat) }\n            { this.renderButton(confirmText, onConfirm, styles.flat) }\n          </View>\n        </View>\n      )\n    }\n\n    if (confirmText) {\n      return (\n        <View style={styles.inlineRow}>\n          <Text style={[styles.inlineText, { color: textColor }]}>{title}</Text>\n          { this.renderButton(confirmText, onConfirm) }\n        </View>\n      )\n    }\n\n    return titleElement\n  }\n\n  render () {\n    const { style, backgroundColor, position, tapToClose } = this.props\n\n    const isTop = position === 'top'\n    const transformOffsetY = isTop\n      ? this.state.transformOffsetYTop\n      : this.state.transformOffsetYBottom\n    return (\n      <TouchableWithoutFeedback onPress={() => tapToClose && this.hide()}>\n        <Animated.View\n          style={[\n            isTop && styles.containerTop || !isTop && styles.containerBottom,\n            {\n              opacity: this.state.transformOpacity,\n              transform: [{ translateY: transformOffsetY }],\n              backgroundColor\n            },\n            style\n          ]}\n        >\n          { this.renderContent() }\n        </Animated.View>\n      </TouchableWithoutFeedback>\n    )\n  }\n}\n\nreactMixin(SnackBar.prototype, TimerMixin)\n"]}