{"version":3,"sources":["../src/SnackBarManager.js"],"names":["SnackBarManager","_setCurrent","props","callback","onAutoDismiss","dismiss","current","_removeCurrent","destroy","get","queue","add","title","options","push","show","_isItemAlreadyExistById","unshift","length","shift","id","find","item"],"mappings":"mUAAA,4B,2CACA,mE,+EAGA,oC,mbAEqBA,gB,CAInB,0BAAe,2DAKfC,WALe,CAKD,SAACC,KAAD,CAAgE,IAAzCC,SAAyC,2DAAnB,UAAM,CAAE,CAAW,CAC5E,GAAI,EAAE,iBAAmBD,MAArB,CAAJ,CAAiC,CAC/BA,MAAME,aAAN,CAAsB,MAAKC,OAA3B,CACD,CAED,GAAMC,SAAU,sCAAiB,6DAAcJ,KAAd,mDAAjB,CAAhB,CACA,MAAKI,OAAL,CAAeA,OAAf,CACAH,WACD,CAbc,MAefI,cAfe,CAeE,UAA0C,IAAzCJ,SAAyC,2DAAnB,UAAM,CAAE,CAAW,CACzD,GAAI,CAAC,MAAKG,OAAV,CAAmB,CACjBH,WACA,OACD,CAED,MAAKG,OAAL,CAAaE,OAAb,CAAqB,UAAM,CACzB,MAAKF,OAAL,CAAe,IAAf,CACAH,WACD,CAHD,EAID,CAzBc,MA2BfM,GA3Be,CA2BT,UAAM,CACV,MAAO,CACLH,QAAS,MAAKA,OADT,CAELI,MAAO,MAAKA,KAFP,CAAP,CAID,CAhCc,MAkCfC,GAlCe,CAkCT,SACJC,KADI,CAEJC,OAFI,CAIK,IADTV,SACS,2DADa,UAAM,CAAE,CACrB,CACT,GAAMD,iBAAUU,WAAV,EAAoBC,OAApB,CAAN,CAEA,GAAI,MAAKP,OAAT,CAAkB,CAChB,MAAKI,KAAL,CAAWI,IAAX,CAAgBZ,KAAhB,EACAC,WACA,OACD,CAED,MAAKF,WAAL,CAAiBC,KAAjB,CAAwBC,QAAxB,EACD,CAhDc,MAkDfY,IAlDe,CAkDR,SACLH,KADK,CAELC,OAFK,CAII,IADTV,SACS,2DADa,UAAM,CAAE,CACrB,CACT,GAAMD,iBAAUU,WAAV,EAAoBC,OAApB,CAAN,CAEA,GAAI,MAAKP,OAAT,CAAkB,CAChB,GAAI,MAAKU,uBAAL,CAA6Bd,KAA7B,CAAJ,CAAyC,CACvC,OACD,CACD,MAAKQ,KAAL,CAAWO,OAAX,CAAmBf,KAAnB,EACAC,WACA,OACD,CAED,MAAKF,WAAL,CAAiBC,KAAjB,CAAwBC,QAAxB,EACD,CAnEc,MAqEfE,OArEe,CAqEL,UAA0C,IAAzCF,SAAyC,2DAAnB,UAAM,CAAE,CAAW,CAClD,MAAKI,cAAL,CAAoB,UAAM,CACxB,GAAI,CAAC,MAAKG,KAAL,CAAWQ,MAAhB,CAAwB,CACtBf,WACA,OACD,CAED,GAAMG,SAAU,MAAKI,KAAL,CAAWS,KAAX,EAAhB,CACA,MAAKlB,WAAL,CAAiBK,OAAjB,CAA0BH,QAA1B,EACD,CARD,EASD,CA/Ec,MAiFfa,uBAjFe,CAiFW,SACxBd,KADwB,CAEZ,CACZ,MAAOA,OAAMkB,EAAN,EAAY,MAAKV,KAAL,CAAWW,IAAX,CAAgB,qBAAQC,MAAKF,EAAL,GAAYlB,MAAMkB,EAA1B,EAAhB,CAAnB,CACD,CArFc,CACb,KAAKd,OAAL,CAAe,IAAf,CACA,KAAKI,KAAL,CAAa,EAAb,CACD,C,iBAPkBV,e","file":"SnackBarManager.js","sourcesContent":["import React from 'react'\nimport RootSiblings from 'react-native-root-siblings'\n\nimport type { SnackItemType } from './type'\nimport SnackBar from './SnackBar'\n\nexport default class SnackBarManager {\n  current: SnackItemType\n  queue: Array<SnackItemType>\n\n  constructor () {\n    this.current = null\n    this.queue = []\n  }\n\n  _setCurrent = (props: SnackItemType, callback?: Function = () => {}): void => {\n    if (!('onAutoDismiss' in props)) {\n      props.onAutoDismiss = this.dismiss\n    }\n\n    const current = new RootSiblings(<SnackBar {...props} />)\n    this.current = current\n    callback()\n  }\n\n  _removeCurrent = (callback?: Function = () => {}): void => {\n    if (!this.current) {\n      callback()\n      return\n    }\n\n    this.current.destroy(() => {\n      this.current = null\n      callback()\n    })\n  }\n\n  get = () => {\n    return {\n      current: this.current,\n      queue: this.queue\n    }\n  }\n\n  add = (\n    title: string,\n    options?: SnackItemType,\n    callback?: Function = () => {}\n  ): void => {\n    const props = { title, ...options }\n\n    if (this.current) {\n      this.queue.push(props)\n      callback()\n      return\n    }\n\n    this._setCurrent(props, callback)\n  }\n\n  show = (\n    title: string,\n    options?: SnackItemType,\n    callback?: Function = () => {}\n  ): void => {\n    const props = { title, ...options }\n\n    if (this.current) {\n      if (this._isItemAlreadyExistById(props)) {\n        return\n      }\n      this.queue.unshift(props)\n      callback()\n      return\n    }\n\n    this._setCurrent(props, callback)\n  }\n\n  dismiss = (callback?: Function = () => {}): void => {\n    this._removeCurrent(() => {\n      if (!this.queue.length) {\n        callback()\n        return\n      }\n\n      const current = this.queue.shift()\n      this._setCurrent(current, callback)\n    })\n  }\n\n  _isItemAlreadyExistById = (\n    props\n  ): boolean => {\n    return props.id && this.queue.find(item => item.id === props.id)\n  }\n}\n"]}